abg purity test rewritten in typescript. original idea during from sbhacks xi but was never completed.